#!/bin/bash

## PATHS

repository_path="$HOME/Documents/repos"

## INSTALL PACKAGES

function git_installer() {

    suto apt install -y git

}

function apt_package_installer() {

    sudo apt update && sudo apt upgrade -y

    sudo add-apt-repository -y ppa:noobslab/themes
    sudo add-apt-repository -y ppa:noobslab/icons
    sudo add-apt-repository -y ppa:openconnect/daily
    sudo apt update

    sudo apt install -y tmux emacs wmctrl xdotool
    sudo apt install -y emacs-goodies-el pass ipython gmrun dropbox
    sudo apt install -y x11-utils chromium-browser build-essential
    sudo apt install -y arc-theme moka-icon-theme arc-icons openconnect

    sudo apt update && sudo apt upgrade -y
    sudo apt autoremove && sudo apt autoclean

}

function snap_package_installer() {
    
    sudo snap install atom --classic
    sudo snap install slack --classic
    sudo snap install skype --classic
    sudo snap install mailspring remmina google-play-music-desktop-player

}
 
## CLONE REPOSITORY

function path_setup() {

    local repository_tools_path="$HOME/bin"
    local repository_library_path="$HOME/lib/bash"
    local emacs_package_path="$HOME/.emacs.d/elpa"
    
    paths=("$repository_path")
    paths+=("$repository_tools_path")
    paths+=("$repository_library_path")
    paths+=("$emacs_package_path")
    
    mkdir -p "${paths[*]}"
    cd "$repository_path"

}

## INSTALL REPOSITORY FILES

function repository_setup() {
    
    while [[ -z $(which git) ]]; do
	if [[ $SECONDS -gt 600 ]]; then
	    printf "Git is unavailable (10 minute timeout occurred)"
	    exit 1
	fi
	sleep 10
    done

    git clone https://github.com/hrmcginnis/hrmutils.git
    cd "$repository_path"/install
    ./install_utils

}

## MAIN

function main() {

    git_installer &
    path_setup &
    apt_package_installer &
    snap_package_installer &
    repository_setup &
    
}

main
