#!/bin/bash
#
# SCREEN_UNLOCK - Listen for dbus screen unlock signal
#

UNLOCK_DIR=$HOME/bin/unlock.d
type="signal"
iface="com.canonical.Unity.Session"

find "$UNLOCK_DIR" -xtype f -exec {} \;
dbus-monitor --session "type='$type',interface='$iface'" |
    while read event
    do
	    if echo "$event" | grep "Unlocked" &>/dev/null
        then
	        find "$UNLOCK_DIR" -xtype f -print0 | sort -z | xargs -0n1 bash -c
	    fi
    done

