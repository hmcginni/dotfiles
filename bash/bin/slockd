#!/bin/bash
#
# SCREEN_UNLOCK - Listen for dbus screen unlock signal
#

LOCK_DIR=$HOME/bin/lock_scripts
UNLOCK_DIR=$HOME/bin/unlock_scripts

type="signal"
iface="com.canonical.Unity.Session"

dbus-monitor --session "type='$type',interface='$iface'" |
    ( while read event; do
	  if echo "$event" | grep "Unlocked" &>/dev/null; then
	      find "$UNLOCK_DIR"/ -xtype f -exec {} &>/dev/null \;
	  elif echo "$event" | grep "Locked" &>/dev/null; then
	      find "$LOCK_DIR"/ -xtype f -exec {} &>/dev/null \;
	  fi
      done )

